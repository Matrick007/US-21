<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telegram Mini App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-user-select: none;
        user-select: none;
    }

    body {
        font-family: 'Orbitron', sans-serif;
        background: #0a0a23;
        color: #fff;
        min-height: 100vh;
        overflow-x: hidden;
        -webkit-overflow-scrolling: touch;
    }

    .background {
        position: fixed;
        top: -10%;
        left: -10%;
        width: 120%;
        height: 120%;
        background: radial-gradient(circle at center, #1e1e3f 0%, #0a0a23 70%);
        z-index: -3;
        animation: backgroundPulse 15s infinite ease-in-out, rotateBackground 30s linear infinite;
    }

    .particles {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"><circle cx="10%" cy="20%" r="3" fill="#6b48ff" opacity="0.8"><animate attributeName="r" values="3;5;3" dur="4s" repeatCount="indefinite"/></circle><circle cx="30%" cy="50%" r="2" fill="#ff2e63" opacity="0.7"><animate attributeName="r" values="2;4;2" dur="3s" repeatCount="indefinite"/></circle><circle cx="70%" cy="30%" r="2.5" fill="#00d4ff" opacity="0.9"><animate attributeName="r" values="2.5;4.5;2.5" dur="5s" repeatCount="indefinite"/></circle><circle cx="90%" cy="80%" r="1.5" fill="#6b48ff" opacity="0.6"><animate attributeName="r" values="1.5;3;1.5" dur="3.5s" repeatCount="indefinite"/></circle><circle cx="50%" cy="40%" r="2" fill="#ff2e63" opacity="0.8"><animate attributeName="r" values="2;3.5;2" dur="4.5s" repeatCount="indefinite"/></circle></svg>');
        animation: particleDrift 20s infinite ease-in-out, particleFade 5s infinite;
        z-index: -2;
        mix-blend-mode: screen;
    }

    .glow-effect {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 800px;
        height: 800px;
        background: radial-gradient(circle, rgba(107, 72, 255, 0.5), transparent 70%);
        transform: translate(-50%, -50%);
        border-radius: 50%;
        filter: blur(150px);
        animation: glowEpic 6s infinite ease-in-out, rotateGlow 12s linear infinite;
        z-index: -1;
    }

    .container {
        width: 95%;
        max-width: 800px;
        margin: 20px auto;
        padding: 25px;
        background: rgba(15, 15, 35, 0.95);
        border-radius: 30px;
        backdrop-filter: blur(25px);
        box-shadow: 0 20px 80px rgba(0, 0, 0, 0.7), inset 0 0 25px rgba(107, 72, 255, 0.3);
        position: relative;
        z-index: 1;
        max-height: 90vh;
        overflow-y: hidden;
        -webkit-overflow-scrolling: touch;
        border: 3px solid rgba(107, 72, 255, 0.7);
        animation: containerEntrance 1.5s ease-out;
    }

    h1 {
        font-size: 3.5rem;
        font-weight: 900;
        margin-bottom: 30px;
        background: linear-gradient(90deg, #6b48ff, #ff2e63, #00d4ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 30px rgba(107, 72, 255, 0.9), 0 0 60px rgba(255, 46, 99, 0.7);
        animation: textGlow 3s infinite alternate, floatText 4s infinite ease-in-out;
    }

    .welcome-text {
        font-size: 1.5rem;
        font-weight: 500;
        color: rgba(255, 255, 255, 0.9);
        text-shadow: 0 0 15px rgba(107, 72, 255, 0.6);
        animation: fadeInUp 1.5s ease-out;
    }

    .button {
        padding: 18px 40px;
        background: linear-gradient(45deg, #6b48ff, #ff2e63, #00d4ff);
        color: #fff;
        border: none;
        border-radius: 60px;
        font-size: 1.4rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 15px 40px rgba(107, 72, 255, 0.7);
        position: relative;
        overflow: hidden;
        animation: buttonPulse 2s infinite;
    }

    .button:hover {
        transform: scale(1.1) translateY(-5px);
        box-shadow: 0 20px 50px rgba(107, 72, 255, 0.9);
    }

    .tab {
        display: none;
    }

    .tab.active {
        display: block;
        animation: tabTransitionIn 0.8s ease-out forwards;
    }

    #tab1 {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 90vh;
        text-align: center;
    }

    #tab1 .welcome-text {
        margin-bottom: 30px;
    }

    #tab5 {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        min-height: 90vh;
        text-align: center;
    }

    .nomination-frame {
        background: rgba(20, 20, 40, 0.9);
        border: 2px solid rgba(107, 72, 255, 0.8);
        border-radius: 20px;
        padding: 20px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6), inset 0 0 15px rgba(107, 72, 255, 0.2);
        animation: frameEntrance 1s ease-out;
    }

    .row-title {
        font-size: 2.2rem;
        font-weight: 800;
        margin: 20px 0 25px;
        background: linear-gradient(90deg, #ff2e63, #6b48ff, #00d4ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 25px rgba(107, 72, 255, 0.9);
    }

    .nominee-subblock {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        width: 100%;
        justify-content: center;
        margin-top: 20px;
    }

    .nominee {
        background: rgba(25, 25, 50, 0.9);
        border-radius: 25px;
        padding: 15px;
        text-align: center;
        transition: transform 0.6s ease;
        cursor: pointer;
        border: 2px solid rgba(107, 72, 255, 0.5);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.5);
        animation: nomineeFloat 12s infinite ease-in-out;
        flex: 0 0 auto;
        position: relative;
        perspective: 1000px;
        min-height: 200px;
        display: flex;
        flex-direction: column;
        align-items: center;
        overflow: hidden;
    }

    .nominee:hover,
    .nominee.active {
        transform: scale(1.05) translateY(-10px);
        box-shadow: 0 25px 60px rgba(107, 72, 255, 0.7);
        border-color: rgba(107, 72, 255, 1);
    }

    .nominee-front, .nominee-back {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        transition: transform 0.6s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 15px;
    }

    .nominee-front {
        transform: rotateY(0deg);
    }

    .nominee-back {
        transform: rotateY(180deg);
        background: rgba(25, 25, 50, 0.9);
        border-radius: 25px;
    }

    .nominee.flipped .nominee-front {
        transform: rotateY(-180deg);
    }

    .nominee.flipped .nominee-back {
        transform: rotateY(0deg);
    }

    .nominee img {
        width: 100%;
        max-width: 150px;
        height: auto;
        border-radius: 20px;
        margin-bottom: 10px;
        object-fit: contain;
    }

    .nominee h3 {
        font-size: 1.2rem;
        font-weight: 700;
        color: #fff;
        text-shadow: 0 0 15px rgba(107, 72, 255, 0.6);
        white-space: normal;
        word-wrap: break-word;
        max-width: 100%;
        padding: 0 10px;
    }

    .nominee-description {
        font-size: 0.9rem;
        color: rgba(255, 255, 255, 0.9);
        text-align: center;
        white-space: normal;
        word-wrap: break-word;
        max-width: 100%;
        margin-bottom: 10px;
        padding: 0 10px;
    }

    .vote-action {
        padding: 10px 20px;
        border: none;
        border-radius: 50px;
        font-size: 1rem;
        font-weight: 700;
        cursor: pointer;
        color: #fff;
        background: linear-gradient(45deg, #ff2e63, #6b48ff, #00d4ff);
        box-shadow: 0 10px 25px rgba(107, 72, 255, 0.7);
        transition: all 0.3s ease;
        white-space: nowrap;
        width: 100%;
        max-width: 150px;
        animation: votePulse 2s infinite;
    }

    .vote-action:hover {
        transform: scale(1.1);
        box-shadow: 0 15px 35px rgba(107, 72, 255, 0.9);
    }

    .submit-button {
        margin-top: 40px;
        display: none;
    }

    @keyframes containerEntrance {
        0% { transform: scale(0.8) translateY(100px); opacity: 0; }
        100% { transform: scale(1) translateY(0); opacity: 1; }
    }

    @keyframes textGlow {
        0% { text-shadow: 0 0 30px rgba(107, 72, 255, 0.9), 0 0 60px rgba(255, 46, 99, 0.7); }
        50% { text-shadow: 0 0 40px rgba(107, 72, 255, 1), 0 0 80px rgba(255, 46, 99, 0.9); }
        100% { text-shadow: 0 0 30px rgba(107, 72, 255, 0.9), 0 0 60px rgba(255, 46, 99, 0.7); }
    }

    @keyframes floatText {
        0% { transform: translateY(0); }
        50% { transform: translateY(-15px); }
        100% { transform: translateY(0); }
    }

    @keyframes particleDrift {
        0% { transform: translate(0, 0) rotate(0deg); }
        25% { transform: translate(-40px, -60px) rotate(20deg); }
        50% { transform: translate(30px, -30px) rotate(-15deg); }
        75% { transform: translate(-20px, 40px) rotate(10deg); }
        100% { transform: translate(0, 0) rotate(0deg); }
    }

    @keyframes particleFade {
        0% { opacity: 0.85; }
        50% { opacity: 1; }
        100% { opacity: 0.85; }
    }

    @keyframes glowEpic {
        0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
        50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.7; }
        100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
    }

    @keyframes rotateGlow {
        from { transform: translate(-50%, -50%) rotate(0deg); }
        to { transform: translate(-50%, -50%) rotate(360deg); }
    }

    @keyframes rotateBackground {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    @keyframes buttonPulse {
        0% { box-shadow: 0 15px 40px rgba(107, 72, 255, 0.7); }
        50% { box-shadow: 0 20px 50px rgba(107, 72, 255, 0.9); }
        100% { box-shadow: 0 15px 40px rgba(107, 72, 255, 0.7); }
    }

    @keyframes votePulse {
        0% { box-shadow: 0 10px 25px rgba(107, 72, 255, 0.7); }
        50% { box-shadow: 0 15px 35px rgba(107, 72, 255, 0.9); }
        100% { box-shadow: 0 10px 25px rgba(107, 72, 255, 0.7); }
    }

    @keyframes nomineeFloat {
        0% { transform: translateY(0); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0); }
    }

    @keyframes frameEntrance {
        0% { transform: translateY(50px); opacity: 0; }
        100% { transform: translateY(0); opacity: 1; }
    }

    @media (min-width: 481px) {
        .nominee {
            flex: 0 0 calc(25% - 20px);
            max-width: calc(25% - 20px);
        }
    }

    @media (max-width: 480px) {
        h1 { font-size: 2.5rem; }
        .welcome-text { font-size: 1.2rem; }
        .button { 
            font-size: 1.1rem; 
            padding: 14px 25px; 
            width: 100%;
        }
        .nominee {
            flex: 0 0 calc(50% - 20px);
            max-width: calc(50% - 20px);
            padding: 10px;
            min-height: 180px;
        }
        .nominee img {
            max-width: 120px;
        }
        .nominee h3 {
            font-size: 1rem;
        }
        .nominee-description {
            font-size: 0.8rem;
        }
        .vote-action {
            font-size: 0.9rem;
            padding: 8px 15px;
            max-width: 120px;
        }
        .container {
            margin: 10px;
            padding: 15px;
        }
        .row-title {
            font-size: 1.8rem;
        }
    }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
    <div class="background"></div>
    <div class="particles"></div>
    <div class="glow-effect"></div>

    <audio id="clickSound" preload="auto">
        <source src="sounds/1.mp3" type="audio/mp3">
    </audio>
    <audio id="transitionSound" preload="auto">
        <source src="sounds/2.mp3" type="audio/mp3">
    </audio>

    <div class="container">
        <div id="tab1" class="tab active">
            <h1 id="welcomeText">Добро пожаловать!</h1>
            <p class="welcome-text">Мы рады видеть вас здесь!</p>
            <button class="button" id="nextButton">Начать</button>
        </div>

        <div id="tab3" class="tab">
            <h1>Голосование</h1>

            <div class="nomination-frame" data-nomination="Токсик">
                <div class="row-title" id="toxic-year">Токсик года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Кирилл" data-row="Токсик">
                        <div class="nominee-front">
                            <img src="photo/toxcik/литнарович.png" alt="Литнарович Кирилл">
                            <h3>Литнарович Кирилл</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Мастер сарказма и едких комментариев</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Полякова" data-row="Токсик">
                        <div class="nominee-front">
                            <img src="photo/toxcik/катюха токсик.jpg" alt="Полякова Екатерина">
                            <h3>Полякова Екатерина</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Королева язвительных шуток</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Куликов" data-row="Токсик">
                        <div class="nominee-front">
                            <img src="photo/toxcik/куликов токсик.jpg" alt="Куликов Виталий">
                            <h3>Куликов Виталий</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Любитель острых споров</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Жданов" data-row="Токсик">
                        <div class="nominee-front">
                            <img src="photo/toxcik/жданов токсик.jpg" alt="Жданов Сергей">
                            <h3>Жданов Сергей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Эксперт по провокациям</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Оператор">
                <div class="row-title">Оператор года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Лукин" data-row="Оператор">
                        <div class="nominee-front">
                            <img src="photo/operator/лукин.png" alt="Лукин Александр">
                            <h3>Лукин Александр</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Мастер точных кадров</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Галкин" data-row="Оператор">
                        <div class="nominee-front">
                            <img src="photo/operator/galkin.png" alt="Галкин Виталий">
                            <h3>Галкин Виталий</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Виртуоз съемки</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Литнарович" data-row="Оператор">
                        <div class="nominee-front">
                            <img src="photo/operator/litnarovich.png" alt="Литнарович Кирилл">
                            <h3>Литнарович Кирилл</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Творец кинематографических шедевров</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Туленков" data-row="Оператор">
                        <div class="nominee-front">
                            <img src="photo/operator/туленков.png" alt="Туленков Андрей">
                            <h3>Туленков Андрей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Художник света и тени</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Пара">
                <div class="row-title">Пара Года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="дима" data-row="Пара">
                        <div class="nominee-front">
                            <img src="photo/para/дима.jpg" alt="Дмитрий и Алина">
                            <h3>Дмитрий и Алина</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Идеальная гармония</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="куликов" data-row="Пара">
                        <div class="nominee-front">
                            <img src="photo/para/куликов.jpg" alt="Виталик и Полина">
                            <h3>Виталик и Полина</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Взрывная энергия</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="рита" data-row="Пара">
                        <div class="nominee-front">
                            <img src="photo/para/рита.jpg" alt="Рита и Арсений">
                            <h3>Рита и Арсений</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Творческий дуэт</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="эльчин" data-row="Пара">
                        <div class="nominee-front">
                            <img src="photo/para/эльчин.jpg" alt="Эльчин и Кира">
                            <h3>Эльчин и Кира</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Неразлучные мечтатели</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Прорыв">
                <div class="row-title">Прорыв года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Фролов" data-row="Прорыв">
                        <div class="nominee-front">
                            <img src="photo/proraf/фролов.jpg" alt="Фролов Андрей">
                            <h3>Фролов Андрей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Взлетел как ракета</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Иванова Рита" data-row="Прорыв">
                        <div class="nominee-front">
                            <img src="photo/proraf/рит.jpg" alt="Иванова Рита">
                            <h3>Иванова Рита</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Прорыв в карьере</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Сидоров" data-row="Прорыв">
                        <div class="nominee-front">
                            <img src="photo/proraf/сидоров.jpg" alt="Сидоров Никита">
                            <h3>Сидоров Никита</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Неожиданный успех</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Жданов" data-row="Прорыв">
                        <div class="nominee-front">
                            <img src="photo/proraf/жданов.jpg" alt="Жданов Сергей">
                            <h3>Жданов Сергей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Прорыв в творчестве</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Спокойный">
                <div class="row-title">Самый Спокойный</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Ролдугин" data-row="Спокойный">
                        <div class="nominee-front">
                            <img src="photo/zzzzz/ролдугин.jpg" alt="Ролдугин Никита">
                            <h3>Ролдугин Никита</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Спокойствие - его сила</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Берсенев Илья" data-row="Спокойный">
                        <div class="nominee-front">
                            <img src="photo/zzzzz/илюха.jpg" alt="Берсенев Илья">
                            <h3>Берсенев Илья</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Ничто не выведет из равновесия</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Голиков" data-row="Спокойный">
                        <div class="nominee-front">
                            <img src="photo/zzzzz/голиков.jpg" alt="">
                            <h3>Голиков Матвей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Дзен в человеческом обличии</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Алиев" data-row="Спокойный">
                        <div class="nominee-front">
                            <img src="photo/zzzzz/алиев.jpg" alt="Павлов Алексей">
                            <h3>Алиев Александр</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Мир и покой</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Воздухан">
                <div class="row-title">Воздухан Года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Галкин" data-row="Воздухан">
                        <div class="nominee-front">
                            <img src="photo/vozdyxan/галкин.jpg" alt="Галкин Виталий">
                            <h3>Галкин Виталий</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Легкий как воздух</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Караев" data-row="Воздухан">
                        <div class="nominee-front">
                            <img src="photo/vozdyxan/эльчин.jpg" alt="Караев Эльчин">
                            <h3>Караев Эльчин</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Парит над суетой</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Куликов" data-row="Воздухан">
                        <div class="nominee-front">
                            <img src="photo/vozdyxan/куликов.jpg" alt="Куликов Виталий">
                            <h3>Куликов Виталий</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Эфирный мечтатель</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Литнарович" data-row="Воздухан">
                        <div class="nominee-front">
                            <img src="photo/vozdyxan/литнарович.jpg" alt="Литнарович Кирилл">
                            <h3>Литнарович Кирилл</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Воздушный философ</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Мем">
                <div class="row-title">Человек Мем Года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Сериков" data-row="">
                        <div class="nominee-front">
                            <img src="photo/mem/сериков.jpg" alt="">
                            <h3>Сериков Александр</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Ходячий мем</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Туленков" data-row="">
                        <div class="nominee-front">
                            <img src="photo/mem/дрюня.jpg" alt="">
                            <h3>Туленков Андрей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Генератор смешного</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Куликов" data-row="Мем">
                        <div class="nominee-front">
                            <img src="photo/mem/куликов.jpg" alt="">
                            <h3>Куликов Виталик</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Мемный король</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Катюха" data-row="Мем">
                        <div class="nominee-front">
                            <img src="photo/mem/полякова.jpg" alt="">
                            <h3>Полякова Катя</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Воплощение юмора</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Канал">
                <div class="row-title">Канал Года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="мультифора" data-row="Канал">
                        <div class="nominee-front">
                            <img src="photo/channel/zvezdy.jpg" alt="'">
                            <h3>Мультифора</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Светит ярче всех</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Бытовуха" data-row="Канал">
                        <div class="nominee-front">
                            <img src="photo/channel/memy.jpg" alt="">
                            <h3>Бытовуха</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Смех до слез</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>

                    <div class="nominee" data-nominee="биба и боба" data-row="Канал">
                        <div class="nominee-front">
                            <img src="photo/channel/novosti.jpg" alt="">
                            <h3>Биба и Боба</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Всегда в курсе</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Кольеретка" data-row="Канал">
                        <div class="nominee-front">
                            <img src="photo/channel/iskry.jpg" alt="">
                            <h3>Кольеретка</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Искры гениальности</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="nomination-frame" data-nomination="Пропажа">
                <div class="row-title">Пропажа Года</div>
                <div class="nominee-subblock">
                    <div class="nominee" data-nominee="Кобзев" data-row="Пропажа">
                        <div class="nominee-front">
                            <img src="photo/propazha/sergey.jpg" alt="а вот так">
                            <h3>Кобзев Артем</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Исчез как призрак</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Жданов" data-row="Пропажа">
                        <div class="nominee-front">
                            <img src="photo/propa;a/жданов.jpg" alt="">
                            <h3>Жданов Сергей</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Куда он делся?</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Ролдугин" data-row="Пропажа">
                        <div class="nominee-front">
                            <img src="photo/propa;a/ролдугин.jpg" alt="">
                            <h3>Ролдугин Никита</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Пропал без вести</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                    <div class="nominee" data-nominee="Эльчин" data-row="Пропажа">
                        <div class="nominee-front">
                            <img src="photo/propa;a/караев.jpg" alt="">
                            <h3>Караев Эльчин</h3>
                        </div>
                        <div class="nominee-back">
                            <div class="nominee-description">Растворился в воздухе</div>
                            <button class="vote-action">Голосовать</button>
                        </div>
                    </div>
                </div>
            </div>

            <button class="button submit-button" id="submitVotes">Отправить</button>
        </div>

        <div id="tab5" class="tab">
            <h1>Спасибо что потратили свое время!</h1>
        </div>
    </div>

    <script>
        const tg = window.Telegram && window.Telegram.WebApp ? window.Telegram.WebApp : {
            initDataUnsafe: {},
            close: () => console.log("Закрытие приложения"),
            MainButton: {
                setText: () => {},
                show: () => {},
                onClick: (cb) => {}
            }
        };

        const nextButton = document.getElementById('nextButton');
        const submitVotes = document.getElementById('submitVotes');
        const clickSound = document.getElementById('clickSound');
        const transitionSound = document.getElementById('transitionSound');
        const selectedNominees = {};
        const nominationOrder = [
            "Токсик", "Оператор", "Пара", "Прорыв", "Спокойный", 
            "Воздухан", "Мем", "Канал", "Пропажа"
        ];

        function playSound(sound) {
            if (sound) {
                sound.currentTime = 0;
                sound.play().catch(error => console.error('Ошибка воспроизведения звука:', error));
            }
        }

        function switchTab(tabId) {
            const activeTab = document.querySelector('.tab.active');
            const newTab = document.getElementById(tabId);

            if (!newTab) {
                console.error(`Вкладка ${tabId} не найдена`);
                return;
            }

            if (activeTab) {
                activeTab.classList.remove('active');
            }
            newTab.classList.add('active');
            playSound(transitionSound);

            if (tabId === 'tab3') {
                setTimeout(() => {
                    const firstSection = document.querySelector('.nomination-frame[data-nomination="Токсик"]');
                    if (firstSection) {
                        firstSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                }, 100);
            }
        }

        if (nextButton) {
            nextButton.addEventListener('click', () => {
                playSound(clickSound);
                switchTab('tab3');
            });
        }

        function scrollToNextNomination(currentRow) {
            const currentIndex = nominationOrder.indexOf(currentRow);
            const nextIndex = currentIndex + 1;
            if (nextIndex < nominationOrder.length) {
                const nextNomination = document.querySelector(`.nomination-frame[data-nomination="${nominationOrder[nextIndex]}"]`);
                if (nextNomination) {
                    setTimeout(() => {
                        nextNomination.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 500);
                }
            }
        }

        function scrollToSubmitButton() {
            const submitButton = document.getElementById('submitVotes');
            if (submitButton) {
                setTimeout(() => {
                    submitButton.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 500);
            }
        }

        const nominees = document.querySelectorAll('.nominee');
        nominees.forEach(nominee => {
            const voteAction = nominee.querySelector('.vote-action');

            nominee.addEventListener('click', (e) => {
                e.preventDefault();
                if (!nominee.classList.contains('selected') && !nominee.classList.contains('flipped')) {
                    playSound(clickSound);
                    nominee.classList.add('flipped');
                    setTimeout(() => {
                        nominee.classList.remove('flipped');
                    }, 4000);
                }
            });

            nominee.addEventListener('touchstart', (e) => {
                e.preventDefault();
                if (!nominee.classList.contains('selected') && !nominee.classList.contains('flipped')) {
                    playSound(clickSound);
                    nominee.classList.add('flipped');
                    setTimeout(() => {
                        nominee.classList.remove('flipped');
                    }, 4000);
                }
            });

            if (voteAction) {
                voteAction.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playSound(clickSound);
                    const row = nominee.getAttribute('data-row');
                    const nomineeId = nominee.getAttribute('data-nominee');
                    selectedNominees[row] = nomineeId;
                    nominee.classList.add('selected');
                    nominee.classList.remove('flipped');
                    document.querySelectorAll(`.nominee[data-row="${row}"]`).forEach(n => {
                        if (n !== nominee) {
                            n.style.pointerEvents = 'none';
                            n.style.opacity = '0.5';
                        }
                    });
                    checkAllVotes();
                    scrollToNextNomination(row);
                });

                voteAction.addEventListener('touchstart', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    playSound(clickSound);
                    const row = nominee.getAttribute('data-row');
                    const nomineeId = nominee.getAttribute('data-nominee');
                    selectedNominees[row] = nomineeId;
                    nominee.classList.add('selected');
                    nominee.classList.remove('flipped');
                    document.querySelectorAll(`.nominee[data-row="${row}"]`).forEach(n => {
                        if (n !== nominee) {
                            n.style.pointerEvents = 'none';
                            n.style.opacity = '0.5';
                        }
                    });
                    checkAllVotes();
                    scrollToNextNomination(row);
                });
            }
        });

        function checkAllVotes() {
            const rows = new Set([...document.querySelectorAll('.nominee')].map(n => n.getAttribute('data-row')));
            if (rows.size === Object.keys(selectedNominees).length) {
                if (submitVotes) {
                    submitVotes.style.display = 'block';
                    scrollToSubmitButton();
                }
            }
        }

        if (submitVotes) {
            submitVotes.addEventListener('click', () => {
                playSound(clickSound);
                const userId = tg.initDataUnsafe.user?.id || 'Аноним';
                const username = tg.initDataUnsafe.user?.username || 'Аноним';
                sendVoteToTelegram(userId, username, selectedNominees);
                switchTab('tab5');
                setTimeout(() => tg.close(), 3000);
            });
        }

        function sendVoteToTelegram(userId, username, selectedNominees) {
            const botToken = '7896921651:AAHvSknX1BImERrKpfk_gAsG6fissqVcrfc';
            const chatId = '-4643837010';
            const message = `@${username} проголосовал за:\n${Object.entries(selectedNominees).map(([row, nominee]) => `${row}: ${nominee}`).join('\n')}`;

            fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ chat_id: chatId, text: message })
            })
            .then(response => response.json())
            .then(data => console.log('Сообщение отправлено:', data))
            .catch(error => console.error('Ошибка отправки:', error));
        }

        tg.MainButton.setText("Закрыть");
        tg.MainButton.show();
        tg.MainButton.onClick(() => {
            playSound(clickSound);
            tg.close();
        });
    </script>
</body>
</html>
    </script>
</body>
</html>
